# git:
#   paging:
#     colorArg: never
#     pager: delta --dark --paging=never
#     # pager: ydiff -p cat -s --wrap --width={{columnWidth}}
#     useConfig: false

customCommands:
  # Create worktree from current branch (when in worktrees view)
  - key: "N"
    context: "worktrees"
    description: "Create new worktree from current branch"
    prompts:
      - type: "input"
        title: "Create a new worktree from {{ .CheckedOutBranch.Name }} with what name?"
        key: "Name"
        initialValue: ""
    command: "git worktree add ../{{ .Form.Name }} {{ .CheckedOutBranch.Name }} -b {{ .Form.Name }}"

  # Create worktree from selected branch (when in branches view)
  - key: "N"
    context: "localBranches"
    description: "Create new worktree from selected branch"
    prompts:
      - type: "input"
        title: "Create a new worktree from {{ .SelectedLocalBranch.Name }} with what name?"
        key: "Name"
        initialValue: ""
    command: "git worktree add ../{{ .Form.Name }} {{ .SelectedLocalBranch.Name }} -b {{ .Form.Name }}"

  # Open worktree in MPOS tmux session (from worktrees view)
  - key: "<c-o>"
    context: "worktrees"
    description: "Open worktree in MPOS tmux session"
    command: "~/.dotfiles/scripts/wt-open.sh {{ .SelectedWorktree.Path }}"
    output: "terminal"

  # Open worktree in MPOS tmux session (from branches view)
  - key: "<c-o>"
    context: "localBranches"
    description: "Open worktree in MPOS tmux session"
    command: "~/.dotfiles/scripts/wt-open.sh {{ .SelectedLocalBranch.Name }}"
    output: "terminal"
